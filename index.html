<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reactive</title>
  <script type="module" src="./main.ts"></script>
  <link rel="stylesheet" href="https://unpkg.com/reset-css@5.0.1/reset.css">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_2449999_tyuwd6prgq.css">
  <link rel="icon" href="/favicon.png" type="image/x-icon">
  <link rel="apple-touch-icon" href="/favicon.png">
  <style>
    body {
      font-size: 16px;
    }
  </style>
  <script>
    const obj = {
      a: 2
    }
  </script>
</head>

<body>
  <div id="app">
    <c-el></c-el>
  </div>

  <script>
    let errorEls = [];
    function createErrorEl(message) {
      const lastErrorEl = errorEls[errorEls.length - 1];
      let top = 0;
      if (lastErrorEl) {
        top = lastErrorEl.offsetTop + lastErrorEl.offsetHeight;
      }
      const divEl = document.createElement("div");
      divEl.style.cssText = `position:absolute;top:${top}px;right:0;width:40%;word-break: break-word;box-sizing:border-box;`;
      divEl.style.color = "red";
      divEl.style.padding = "10px";
      divEl.style.backgroundColor = "rgb(255,240,240)";
      divEl.style.cursor = "pointer";
      divEl.title = "点击移除全部提示";
      divEl.innerHTML = message;
      divEl.onclick = function () {
        errorEls.forEach(element => {
          element.parentElement.removeChild(element);
        });
        errorEls = [];
      };
      errorEls.push(divEl);
      document.body.insertBefore(divEl, document.body.firstChild);
    }
    window.onerror = function (details, file, line, column, message) {
      createErrorEl(`${message} <br/> <div style='padding-top:5px;color:blue'>at ${file}:${line}:${column}</span>`);
    }
  </script>
</body>

</html>